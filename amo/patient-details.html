<html class="page-38 app-IMIM" lang="en" style="--js-sticky-top: 204.375px;">

<head>
  <meta http-equiv="x-ua-compatible" content="IE=edge">
  <meta charset="utf-8">
  <title>Patient Details</title>

  <link rel="apple-touch-icon" href="../assets/img/app-icon-192.png">
  <link rel="icon" href="../assets/img/app-icon-32.png">

  <link rel="stylesheet" href="../assets/css/Core.min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/Theme-Standard.min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/font-apex.min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/Core_theme.min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/custom.min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/aos.min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/theme.css" type="text/css">
  <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="../assets/vendor/datatable/css/dataTables.css" rel="stylesheet">
  <link rel="stylesheet" href="../assets/vendor/datatable/dataTables.bootstrap5.min.css">
  <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">




  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="-1">
  <meta http-equiv="Cache-Control" content="no-cache">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style type="text/css">
    .t-fht-cell {
      height: 1px;
      overflow: hidden;
    }

    .t-fht-wrapper {
      width: 100%;
      overflow: hidden;
      position: relative;
    }

    .t-fht-thead {
      overflow: hidden;
      position: relative;
    }

    .t-fht-tbody {
      overflow: auto;
    }
  </style>
</head>

<body
  class="t-PageBody t-PageBody--hideLeft t-PageBody--hideActions t-PageTemplate--standard apex-top-nav apex-icons-fontapex apex-theme-vita-standard js-HeaderExpanded t-PageBody--topNav"
  id="t_PageBody" data-aos-easing="ease" data-aos-duration="400" data-aos-delay="0">
  <a href="#main" id="t_Body_skipToContent">Skip to Main Content</a>
  <form>
    <header class="t-Header" id="t_Header" role="banner">
      <div class="t-Header-branding">
        <div class="t-Header-controls">
          <button class="t-Button t-Button--icon t-Button--header t-Button--headerTree" aria-label="Main Navigation"
            title="Main Navigation" id="t_Button_navControl" type="button"><span class="t-Header-controlsIcon"
              aria-hidden="true"></span></button>
        </div>
        <div class="t-Header-logo">
          <!-- <a href="&#x2F;ords&#x2F;r&#x2F;dimdev&#x2F;imim&#x2F;home?session=16050898105778" class="t-Header-logo-link"><img src="r&#x2F;dimdev&#x2F;117&#x2F;files&#x2F;static&#x2F;v194&#x2F;app-251298-logo.jpeg" alt="" class="apex-logo-img" /><span class="apex-logo-text">DIRECTORATE OF INDIAN MEDICINE  - INDENT MANAGEMENT</span></a> -->
          <div class="gigw">
            <li><a data-aos="fade-up" data-aos-delay="200" class="linkedin btn-decrease aos-init aos-animate"><span
                  class="d-inline-block" tabindex="0" data-toggle="tooltip" title="font size Decrease"><i></i> A
                  -</span></a></li>
            <li><a data-aos="fade-up" data-aos-delay="300" class="linkedin btn-orig aos-init aos-animate"><span
                  class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Reset font"><i></i> A
                  <sup></sup></span></a></li>
            <li><a data-aos="fade-up" data-aos-delay="400" class="instagram btn-increase aos-init aos-animate"><span
                  class="d-inline-block" tabindex="0" data-toggle="tooltip" title="font size Increase"><i></i> A
                  +</span></a></li>
            <li><a data-aos="fade-up" data-aos-delay="500" class="aos-init aos-animate"><span class="d-inline-block"
                  tabindex="0" data-toggle="tooltip" title="Dark Mode"><i class="t-Icon fa fa-moon-o"
                    id="darkmode"></i></span></a></li>
            <li><a data-aos="fade-up" data-aos-delay="600" class="form-check form-switch aos-init aos-animate"><label
                  class="form-check-label" for="screenReaderSwitch">
                  <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Screen Reader">
                    <i id="sound" class="t-Icon fa fa-volume-up"></i></span></label><input class="form-check-input"
                  type="checkbox" role="switch" id="screenReaderSwitch"
                  onclick="readText(document.getElementsByTagName('body')[0])"></a>
            </li>
          </div>
        </div>
        <div class="t-Header-navBar">
          <div class="t-Header-navBar--start"></div>
          <div id="globalHeader"></div>
          <div class="t-Header-navBar--end"></div>
        </div>
      </div>
      <div class="top">
        <img id="leftlogo" data-aos="fade-right" data-aos-duration="800" src="../assets/img/head-tnlogo.png"
          class="aos-init aos-animate">
        <h1 data-aos="zoom-in" data-aos-duration="800" class="dept-name text-middle aos-init aos-animate">Medicine
          Indent</h1>
        <h3 data-aos="zoom-in" data-aos-duration="800" class="dept-name2 text-middle aos-init aos-animate">Department of
          Indian Medicine and Homoeopathy</h3>
        <img id="rightlogo" data-aos="fade-left" data-aos-duration="800" src="../assets/img/head-dept-logo.png"
          class="aos-init aos-animate">
      </div>
      <div class="t-Header-nav">
        <div class="t-Header-nav-list js-tabLike js-tabLike a-MenuBar a-MenuBar--overflow a-MenuBar--tabs"
          id="t_MenuNav" role="menubar">
          <ul id="nav-links">
            <div id="navbar-container"></div>
          </ul>
        </div>
      </div>
    </header>
    <div class="t-Body">
      <div class="t-Body-main">
        <div class="t-Body-title" id="t_Body_title"></div>
        <div class="t-Body-content" id="t_Body_content">
          <div id="t_Body_content_offset"></div>
          <main id="main" class="t-Body-mainContent">
            <span id="APEX_SUCCESS_MESSAGE" data-template-id="238562751400702882270_S"
              class="apex-page-success u-hidden"></span><span id="APEX_ERROR_MESSAGE"
              data-template-id="238562751400702882270_E" class="apex-page-error u-hidden"></span>
            <div class="t-Body-fullContent"></div>
            <div class="t-Body-contentInner">
              <div class="container">
                <div class="row ">
                  <div class="col col-6 apex-col-auto col-start">
                    <div
                      class="t-Form-fieldContainer is-required rel-col t-Form-fieldContainer--indicatorAsterisk t-Form-fieldContainer--large apex-item-wrapper apex-item-wrapper--date-picker-apex apex-item-wrapper--date-picker-apex-popup"
                      id="P38_FROM_DATE_CONTAINER">
                      <div class="t-Form-labelContainer col col-2">
                        <label for="P38_FROM_DATE" id="P38_FROM_DATE_LABEL" class="t-Form-label">From Date </label>
                      </div>
                      <div class="t-Form-inputContainer col col-4">
                        <div class="t-Form-itemWrapper">
                          <input type="date" id="P38_FROM_DATE" name="P38_FROM_DATE"
                            class="apex-item-text apex-item-datepicker" required>
                        </div>
                        <div class="t-Form-itemAssistance">
                          <span id="P38_FROM_DATE_error_placeholder" class="a-Form-error"></span>
                          <div class="t-Form-itemRequired" aria-hidden="true">Required</div>
                        </div>
                      </div>

                    </div>
                  </div>
                  <div class="col col-6 apex-col-auto col-end">
                    <div
                      class="t-Form-fieldContainer is-required rel-col t-Form-fieldContainer--indicatorAsterisk t-Form-fieldContainer--large apex-item-wrapper apex-item-wrapper--date-picker-apex apex-item-wrapper--date-picker-apex-popup"
                      id="P38_TO_DATE_CONTAINER">
                      <div class="t-Form-labelContainer col col-2">
                        <label for="P38_TO_DATE" id="P38_TO_DATE_LABEL" class="t-Form-label">To Date </label>
                      </div>
                      <!-- <div class="t-Form-inputContainer col col-4">
                        <div class="t-Form-itemWrapper">
                          <a-date-picker id="P38_TO_DATE" change-month="true" change-year="true" display-as="popup"
                            display-weeks="none" format="DS" previous-next-distance="one-month"
                            show-days-outside-month="visible" show-on="focus" show-time="false"
                            time-increment-minute="15" today-button="true" valid-example="3/5/2025"
                            year-selection-range="5" class="apex-item-datepicker--popup"><input aria-haspopup="dialog"
                              class="apex-item-text apex-item-datepicker" name="P38_TO_DATE" size="30" type="text"
                              id="P38_TO_DATE_input" aria-labelledby="P38_TO_DATE_LABEL"><button aria-haspopup="dialog"
                              aria-label="Select Date" class="a-Button a-Button--calendar" tabindex="-1"
                              title="Select Date" type="button" aria-describedby="P38_TO_DATE_LABEL"
                              aria-controls="P38_TO_DATE_input"><span
                                class="a-Icon icon-calendar"></span></button></a-date-picker>
                        </div>
                        <div class="t-Form-itemAssistance">
                          <span id="P38_TO_DATE_error_placeholder" class="a-Form-error"
                            data-template-id="428237131064519931341_ET"></span>
                          <div class="t-Form-itemRequired" aria-hidden="true">Required</div>
                        </div>
                      </div> -->
                      <div class="t-Form-inputContainer col col-4">
                        <div class="t-Form-itemWrapper">

                          <input type="date" id="P38_TO_DATE" name="P38_TO_DATE"
                            class="apex-item-text apex-item-datepicker" required>
                        </div>
                        <div class="t-Form-itemAssistance">
                          <span id="P38_TO_DATE_error_placeholder" class="a-Form-error"></span>
                          <div class="t-Form-itemRequired" aria-hidden="true">Required</div>
                        </div>
                      </div>

                    </div>
                  </div>
                </div>
                <div class="row ">
                  <div class="col col-3  col-start"><span class="apex-grid-nbsp">&nbsp;</span></div>
                  <div class="col col-3 apex-col-auto ">
                    <button class="t-Button t-Button--large t-Button--success t-Button--gapTop t-Button--gapBottom"
                      type="button" id="searchBtn"><span class="t-Button-label">Search</span></button>
                  </div>
                  <div class="col col-6 apex-col-auto col-end"><button
                      class="t-Button t-Button--hot js-ignoreChange t-Button--large t-Button--gapTop t-Button--gapBottom"
                      type="button" id="B162239396734867571906"><span class="t-Button-label">Clear</span></button></div>
                </div>
                <div class="row ">
                  <div class="col col-12 apex-col-auto col-start col-end">
                    <div id="R162326795435516536704" role="region" aria-label="Patient Details"
                      class="t-IRR-region js-apex-region">
                      <div class="t-Region-orderBy"></div>
                      <div id="R162326795435516536704_ir" class="a-IRR-container">
                        <div id="R162326795435516536704_worksheet_region" class="a-IRR" aria-live="polite">
                          <div id="R162326795435516536704_single_row_view" class="a-IRR-singleRowView"></div>
                          <div id="R162326795435516536704_full_view" class="a-IRR-fullView">
                            <div id="R162326795435516536704_toolbar" class="a-IRR-toolbar">
                              <div role="search" aria-label="Search bar of Patient Details"
                                id="R162326795435516536704_toolbar_controls" class="a-IRR-controls">
                                <div class="a-IRR-controlGroup a-IRR-controlGroup--search a-IRR-controlGroup--hidden">
                                  <div class="a-IRR-search"><input type="hidden"
                                      id="R162326795435516536704_column_search_current_column"><input type="hidden"
                                      id="R162326795435516536704_search_field" value=""></div>
                                </div>
                                <div class="a-IRR-controlGroup a-IRR-controlGroup--views"></div>
                                <div class="a-IRR-controlGroup a-IRR-controlGroup--options">
                                  <input type="hidden" id="R162326795435516536704_row_select" value="50">
                                  <div class="a-IRR-actions"><button id="R162326795435516536704_actions_button"
                                      class="a-Button a-IRR-button a-IRR-button--actions" type="button"
                                      data-menu="R162326795435516536704_actions_menu" aria-haspopup="menu">Actions<span
                                        aria-hidden="true" class="a-Icon icon-menu-drop-down"></span></button></div>
                                </div>
                              </div>
                            </div>
                            <div id="R162326795435516536704_content" class="a-IRR-content ">
                              <div id="R162326795435516536704_dialog_js" class="a-IRR-dialogBody" style="display:none">
                              </div>
                              <input type="hidden" id="R162326795435516536704_worksheet_id"
                                value="162326795449981536704">
                              <input type="hidden" id="R162326795435516536704_app_user" value="9994793279">
                              <input type="hidden" id="R162326795435516536704_report_id" value="162326833346229543293">
                              <input type="hidden" id="R162326795435516536704_view_mode" value="REPORT">
                              <style id="R162326795435516536704_worksheet_css" type="text/css"></style>
                              <div role="region" aria-label="Chart view of Patient Details"
                                id="R162326795435516536704_chart" class="a-IRR-chartView"></div>
                              <div role="region" aria-label="Group by view of Patient Details"
                                id="R162326795435516536704_group_by" class="a-IRR-groupByView"></div>
                              <div role="region" aria-label="Pivot view of Patient Details"
                                id="R162326795435516536704_pivot" class="a-IRR-pivotView"></div>
                              <div role="region" aria-label="Data view of Patient Details"
                                id="R162326795435516536704_data_panel" class="a-IRR-reportView">
                                <div role="region" aria-label="Message" class="a-IRR-noDataMsg">
                                  <div class="a-IRR-noDataMsg-icon"><span class="a-Icon icon-irr-no-results"
                                      aria-hidden="true"></span></div>
                                  <span class="a-IRR-noDataMsg-text">No data found.</span>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </main>
          <footer class="t-Footer" id="t_Footer" role="contentinfo">
            <div class="t-Footer-body">
              <div class="t-Footer-content"></div>
              <div class="t-Footer-apex">
                <!-- <div class="t-Footer-version">    </div>
                    <div class="t-Footer-customize"></div>
                     -->
                <div class="row">
                  <div class="col-6">
                    <p class="text-middle"><img class="footer-logo" src="../assets/img/head-dept-logo.png"><br>Content
                      owned by Department of Indian Medicine and Homoeopathy ©</p>
                  </div>
                  <div class="col-6">
                    <p class="text-middle"><img class="footer-logo" src="../assets/img/tnegalogo.png"><br>Designed and
                      Developed by Tamil Nadu e-Governance Agency</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="t-Footer-top">
              <a href="#top" class="t-Footer-topButton" id="t_Footer_topButton" title="Start of page"
                aria-label="Start of page"><span class="a-Icon icon-up-chevron" aria-hidden="true"></span></a>
            </div>
          </footer>
        </div>
      </div>
    </div>
    <div class="t-Body-inlineDialogs" id="t_Body_inlineDialogs"></div>
    <input type="hidden" id="pPageFormRegionChecksums" value="[]">
    <input type="hidden" id="pPageItemsRowVersion" value=""><input type="hidden" id="pPageItemsProtected"
      value="/Td5kDNN0fG_np8Q5vfH5kfifHabZ2Kt10A1_VZit4wOymkVtoUG9iTKc0bTK7ZOaCYV9o-l5KcDqxBEISMo0KA">
  </form>
  <script src="../assets/js/jquery-3.6.0.min.js"></script>
  <script src="../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- DataTables -->
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="../assets/js/widget.treeView.min.js"></script>
  <script src="../assets/common.js"></script>
  <script src="../assets/js/widget.interactiveReport.min.js"></script>
  <script src="../assets/js/widget.iconList.min.js"></script>
  <script src="../assets/js/widget.stickyTableHeader.min.js"></script>
  <script src="../assets/js/widget.stickyWidget.min.js"></script>
  <script src="../assets/js/item.Colorpicker.min.js"></script>
  <script src="../assets/js/jetCommonBundle.min.js"></script>
  <script src="../assets/js/chartBundle.min.js"></script>

  <script src="../assets/js/toastUtil.js"></script>
  <script type="module" src="../assets/js/dataTableUtil.js"></script>
  <script src="../assets/js/crypto-js.min.js"></script>
  <script src="../assets/js/theme42.min.js"></script>
  <script src="../assets/js/global.js"></script>
  <script src="../assets/js/encrypt_decrypt.js"></script>
  <script src="../assets/js/singleFileUpload.js"></script>
  <script src="../assets/js/globalHeader.js"></script>
  <script src="../assets/js/validateField.js"></script>
  <script>
    document.getElementById("P38_FROM_DATE").max = new Date().toISOString().split("T")[0];
    document.getElementById("P38_TO_DATE").max = new Date().toISOString().split("T")[0];

  </script>

  <script>
    let dataTableRef;

    $(document).ready(function () {
      let uploadFile = null;
      let uploadPayload = null;
      const apiUrl = 'https://tngis.tnega.org/medical_indent_api/v1/commonfunction';
      const mobnumber = localStorage.getItem('userMobileNumber') || '9941256207';

      const district = localStorage.getItem('userDistrict');
      const nameOfTheInstitution = localStorage.getItem('userInstitutionName');
      const system = localStorage.getItem('userSystem');
      function fetchTableData() {
        const fromDateInput = document.getElementById("P38_FROM_DATE");
        fromDateInput.max = new Date().toISOString().split("T")[0];

        // Get and format directly here
        let formattedDate = null;
        if (fromDateInput.value) {
          const [year, month, day] = fromDateInput.value.split("-");
          formattedDate = `${parseInt(day)}/${parseInt(month)}/${year}`;
        }
        const payload = {
          action: "function_call",
          function_name: "im_patient_details_by_date_fn",
          params: {
            // p_from_date: $('#P38_FROM_DATE').val() || null,
            // p_to_date: $('#P38_TO_DATE').val() || null,
            p_from_date: formattedDate,
            p_to_date: "8/7/2025",
            p_mobnumber: "9941256207",
          }
        };
        loadDataToTable({
          tableId: 'pressReleaseTable',
          apiUrl,
          httpMethod: 'POST',
          payload: encryptData(payload),
          rowBuilder: (item) => {
            return `
                  <tr>
                    <td class="u-tC">${item.sl_no || 'N/A'}</td>
                    <td class="u-tC">${item.ts_edm_id || 'N/A'}</td>
                    <td class="u-tC">${item.ts_date || 'N/A'}</td>
                    <td class="u-tC">${item.ts_activity || 'N/A'}</td>
                    <td class="u-tC">${item.ts_notes || 'N/A'}</td>
                    <td class="u-tC">${item.ts_created_date || 'N/A'}</td>
                    <td class="u-tC">${item.inspection_report || 'N/A'}</td>
                    <td>${createDownloadLink(item.image_attachment1, item.mime_type1, item.file_name1)}</td>
                    <td>${createDownloadLink(item.image_attachment2, item.mime_type2, item.file_name2)}</td>
                    <td>${createDownloadLink(item.image_attachment3, item.mime_type3, item.file_name3)}</td>
                    <td>${createDownloadLink(item.image_attachment4, item.mime_type4, item.file_name4)}</td>
                  </tr>
                `;
          },
          onTableInit: function (dtRef) {
            dataTableRef = dtRef;
          }
        });
      }

      $('#searchBtn').on('click', function () {
        var fromDate = $('#P38_FROM_DATE').val();
        var toDate = $('#P38_TO_DATE').val();

        if (!fromDate || !toDate) {
          showErrorToast('Please select both From Date and To Date.');
          return;
        }
        fetchTableData();
      });

    });
  </script>
</body>

</html>