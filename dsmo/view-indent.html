<html class="page-4 app-IMIM" lang="en" style="--js-sticky-top: 204.375px; --js-sticky-scrollpad-block-start: 203px;">
  <head>
    <meta http-equiv="x-ua-compatible" content="IE=edge">
    <meta charset="utf-8">
    <title>VIEW INDENT DETAILS - DSMO</title>
    
     <link rel="apple-touch-icon" href="../assets/img/app-icon-192.png">
  <link rel="icon" href="../assets/img/app-icon-32.png">

  <link rel="stylesheet" href="../assets/css/Core.min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/Theme-Standard.min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/font-apex.min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/Core_theme.min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/custom.min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/aos.min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/theme.css" type="text/css">
  <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="../assets/vendor/datatable/css/dataTables.css" rel="stylesheet">
  <link rel="stylesheet" href="../assets/vendor/datatable/dataTables.bootstrap5.min.css">
  <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="-1">
  <meta http-equiv="Cache-Control" content="no-cache">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    .modal-backdrop {
      background-color: #00000040 !important;
    }
  </style>


  </head>
  <body class="t-PageBody t-PageBody--hideLeft t-PageBody--hideActions t-PageTemplate--standard apex-top-nav apex-icons-fontapex apex-theme-vita-standard t-PageBody--topNav js-HeaderExpanded" id="t_PageBody" data-aos-easing="ease" data-aos-duration="400" data-aos-delay="0">
    <a href="#main" id="t_Body_skipToContent">Skip to Main Content</a>
    <form>
      <input type="hidden" name="p_flow_id" value="117" id="pFlowId"><input type="hidden" name="p_flow_step_id" value="4" id="pFlowStepId"><input type="hidden" name="p_instance" value="10726430572880" id="pInstance"><input type="hidden" name="p_page_submission_id" value="99026716740616158709983304851603812977" id="pPageSubmissionId"><input type="hidden" name="p_request" value="" id="pRequest"><input type="hidden" name="p_reload_on_submit" value="S" id="pReloadOnSubmit"><input type="hidden" value="imim/view-indent-details-dsmo/10726430572880" id="pContext"><input type="hidden" value="99026716740616158709983304851603812977" id="pSalt">
      <header class="t-Header" id="t_Header" role="banner">
        <div class="t-Header-branding">
          <div class="t-Header-controls">
            <button class="t-Button t-Button--icon t-Button--header t-Button--headerTree" aria-label="Main Navigation" title="Main Navigation" id="t_Button_navControl" type="button"><span class="t-Header-controlsIcon" aria-hidden="true"></span></button>
          </div>
          <div class="t-Header-logo">
            <!-- <a href="&#x2F;ords&#x2F;r&#x2F;dimdev&#x2F;imim&#x2F;home?session=10726430572880" class="t-Header-logo-link"><img src="r&#x2F;dimdev&#x2F;117&#x2F;files&#x2F;static&#x2F;v194&#x2F;app-251298-logo.jpeg" alt="" class="apex-logo-img" /><span class="apex-logo-text">DIRECTORATE OF INDIAN MEDICINE  - INDENT MANAGEMENT</span></a> -->
            <div class="gigw">
              <li><a data-aos="fade-up" data-aos-delay="200" class="linkedin btn-decrease aos-init aos-animate"><span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="font size Decrease"><i></i> A -</span></a></li>
              <li><a data-aos="fade-up" data-aos-delay="300" class="linkedin btn-orig aos-init aos-animate"><span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Reset font"><i></i> A <sup></sup></span></a></li>
              <li><a data-aos="fade-up" data-aos-delay="400" class="instagram btn-increase aos-init aos-animate"><span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="font size Increase"><i></i> A +</span></a></li>
              <li><a data-aos="fade-up" data-aos-delay="500" class="aos-init aos-animate"><span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Dark Mode"><i class="t-Icon fa fa-moon-o" id="darkmode"></i></span></a></li>
              <li><a data-aos="fade-up" data-aos-delay="600" class="form-check form-switch aos-init aos-animate"><label class="form-check-label" for="screenReaderSwitch">
                <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Screen Reader">
                <i id="sound" class="t-Icon fa fa-volume-up"></i></span></label><input class="form-check-input" type="checkbox" role="switch" id="screenReaderSwitch" onclick="readText(document.getElementsByTagName('body')[0])"></a>
              </li>
            </div>
          </div>
          <div class="t-Header-navBar">
            <div class="t-Header-navBar--start"></div>
            <div class="t-Header-navBar--center">
              <ul class="t-NavigationBar " id="428237243222882931397">
                <li class="t-NavigationBar-item ">
                  <button class="t-Button t-Button--icon t-Button t-Button--header t-Button--navBar" type="button" id="L428237300758551931558" data-menu="menu_L428237300758551931558" title="" aria-haspopup="menu">
                  <span class="t-Icon fa fa-user" aria-hidden="true"></span><span class="t-Button-label">Siva</span><span class="t-Button-badge"></span><span class="a-Icon icon-down-arrow" aria-hidden="true"></span>
                  </button>
                </li>
              </ul>
            </div>
            <div class="t-Header-navBar--end"></div>
          </div>
        </div>
        <div class="top">
          <img id="leftlogo" data-aos="fade-right" data-aos-duration="800" src="../assets/img/head-tnlogo.png" class="aos-init aos-animate">
          <h1 data-aos="zoom-in" data-aos-duration="800" class="dept-name text-middle aos-init aos-animate">Medicine Indent</h1>
          <h3 data-aos="zoom-in" data-aos-duration="800" class="dept-name2 text-middle aos-init aos-animate">Department of Indian Medicine and Homoeopathy</h3>
          <img id="rightlogo" data-aos="fade-left" data-aos-duration="800" src="../assets/img/head-dept-logo.png" class="aos-init aos-animate">
        </div>
        <div class="t-Header-nav">
          <div class="t-Header-nav-list js-tabLike js-tabLike a-MenuBar a-MenuBar--overflow a-MenuBar--tabs" id="t_MenuNav" role="menubar">
            <ul role="none">
              <li role="none" id="t_MenuNav_0" class="a-MenuBar-item a-Menu--current"><a role="menuitem" class="a-MenuBar-label" aria-current="true" id="t_MenuNav_0i" href="../dsmo/home.html">Home</a></li>
              <li role="none" id="t_MenuNav_1" class="a-MenuBar-item"><a role="menuitem" class="a-MenuBar-label" id="t_MenuNav_1i" href="../dsmo/received-medicine.html" tabindex="-1">Received Medicine Report</a></li>
              <li role="none" id="t_MenuNav_2" class="a-MenuBar-item"><a role="menuitem" class="a-MenuBar-label" id="t_MenuNav_2i" href="../dsmo/medicine-details.html" tabindex="-1">Medicine Details</a></li>
              <li role="none" id="t_MenuNav_3" class="a-MenuBar-item"><a role="menuitem" class="a-MenuBar-label" id="t_MenuNav_3i" href="../dsmo/download.html" tabindex="-1">Download despatched medicine</a></li>
              <li role="none" id="t_MenuNav_4" class="a-MenuBar-item"><a role="menuitem" class="a-MenuBar-label" id="t_MenuNav_4i" href="../dsmo/view-indent.html" tabindex="-1">View Indent Details - DSMO</a></li>  
            </ul>
          </div>
        </div>
      </header>
      <div class="t-Body">
        <div class="t-Body-main">
          <div class="t-Body-title" id="t_Body_title" style=""></div>
          <div class="t-Body-content" id="t_Body_content">
            <div id="t_Body_content_offset"></div>
            <main id="main" class="t-Body-mainContent">
              <span id="APEX_SUCCESS_MESSAGE" data-template-id="238562751400702882270_S" class="apex-page-success u-hidden"></span><span id="APEX_ERROR_MESSAGE" data-template-id="238562751400702882270_E" class="apex-page-error u-hidden"></span>
              <div class="t-Body-fullContent"></div>
              <div class="t-Body-contentInner">
                <input type="hidden" name="P4_COM_ID" id="P4_COM_ID" value=""><input type="hidden" data-for="P4_COM_ID" value="l3C-WNMZN66loHc5lLaQkIf5JvX6SD6CUdF4N-sCaOjCDE3eyS7b3OaSE56bJ0439bK-5_CmGd5f-86_vwsBqg">
                <div class="container">
                  <div class="row ">
                    <div class="col col-12 apex-col-auto col-start col-end">
                      <div class="t-Region t-Region--scrollBody" id="R236785385346909797103" role="region" aria-label="Search">
                        <div class="t-Region-header">
                          <div class="t-Region-headerItems t-Region-headerItems--title">
                            <span class="t-Region-headerIcon"><span class="t-Icon " aria-hidden="true"></span></span>
                            <h2 class="t-Region-title" id="R236785385346909797103_heading" data-apex-heading="">Search</h2>
                          </div>
                          <div class="t-Region-headerItems t-Region-headerItems--buttons"><span class="js-maximizeButtonContainer"></span></div>
                        </div>
                        <div class="t-Region-bodyWrap">
                          <div class="t-Region-buttons t-Region-buttons--top">
                            <div class="t-Region-buttons-left"></div>
                            <div class="t-Region-buttons-right"></div>
                          </div>
                          <div class="t-Region-body">
                            <div class="t-Region-orderBy"></div>
                            <div class="container">
                              <div class="row ">
                                <div class="col col-4 apex-col-auto col-start">
                                  <div class="t-Form-fieldContainer t-Form-fieldContainer--stacked t-Form-fieldContainer--stretchInputs apex-item-wrapper apex-item-wrapper--select-list" id="P4_NAME_OF_THE_DISTRICT_CONTAINER">
                                    <div class="t-Form-labelContainer">
                                      <label for="P4_NAME_OF_THE_DISTRICT" id="P4_NAME_OF_THE_DISTRICT_LABEL" class="t-Form-label">Name of the District</label> 
                                    </div>
                                    <div class="t-Form-inputContainer">
                                      <div class="t-Form-itemWrapper">
                                        <select id="P4_NAME_OF_THE_DISTRICT" name="P4_NAME_OF_THE_DISTRICT" class="selectlist apex-item-select" data-native-menu="false" size="1"> 
                                        </select>
                                      </div>
                                      <span id="P4_NAME_OF_THE_DISTRICT_error_placeholder" class="a-Form-error" data-template-id="428237130876298931341_ET"></span>
                                    </div>
                                  </div>
                                </div>
                                <div class="col col-4 apex-col-auto ">
                                  <div class="t-Form-fieldContainer t-Form-fieldContainer--stacked t-Form-fieldContainer--stretchInputs apex-item-wrapper apex-item-wrapper--select-list" id="P4_NAME_OF_THE_INSTITUTION_CONTAINER">
                                    <div class="t-Form-labelContainer">
                                      <label for="P4_NAME_OF_THE_INSTITUTION" id="P4_NAME_OF_THE_INSTITUTION_LABEL" class="t-Form-label">Name of the Institution</label> 
                                    </div>
                                    <div class="t-Form-inputContainer">
                                      <div class="t-Form-itemWrapper">
                                        <select id="P4_NAME_OF_THE_INSTITUTION" name="P4_NAME_OF_THE_INSTITUTION" class="selectlist apex-item-select" data-native-menu="false" size="1">
                                         
                                        </select>
                                      </div>
                                      <span id="P4_NAME_OF_THE_INSTITUTION_error_placeholder" class="a-Form-error" data-template-id="428237130876298931341_ET"></span>
                                    </div>
                                  </div>
                                </div>
                                <div class="col col-4 apex-col-auto col-end">
                                  <div class="t-Form-fieldContainer t-Form-fieldContainer--stacked is-required t-Form-fieldContainer--stretchInputs apex-item-wrapper apex-item-wrapper--select-list" id="P4_SYSTEM_CONTAINER">
                                    <div class="t-Form-labelContainer">
                                      <label for="P4_SYSTEM" id="P4_SYSTEM_LABEL" class="t-Form-label">System  </label> 
                                    </div>
                                    <div class="t-Form-inputContainer">
                                      <div class="t-Form-itemWrapper">
                                        <select id="P4_SYSTEM" name="P4_SYSTEM" class="selectlist apex-item-select" data-native-menu="false" size="1">
                                         
                                        </select>
                                      </div>
                                      <div class="t-Form-itemAssistance">
                                        <span id="P4_SYSTEM_error_placeholder" class="a-Form-error" data-template-id="428237131750063931341_ET"></span>
                                        <div class="t-Form-itemRequired" aria-hidden="true">Required</div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="row ">
                                <div class="col col-6 apex-col-auto col-start">
                                  <div class="t-Form-fieldContainer t-Form-fieldContainer--stacked t-Form-fieldContainer--stretchInputs apex-item-wrapper apex-item-wrapper--select-list" id="P4_FINANCIAL_YEAR_CONTAINER">
                                    <div class="t-Form-labelContainer">
                                      <label for="P4_FINANCIAL_YEAR" id="P4_FINANCIAL_YEAR_LABEL" class="t-Form-label">Financial Year</label> 
                                    </div>
                                    <div class="t-Form-inputContainer">
                                      <div class="t-Form-itemWrapper">
                                        <select id="P4_FINANCIAL_YEAR" name="P4_FINANCIAL_YEAR" class="selectlist apex-item-select" data-native-menu="false" size="1">
                                         
                                        </select>
                                      </div>
                                      <span id="P4_FINANCIAL_YEAR_error_placeholder" class="a-Form-error" data-template-id="428237130876298931341_ET"></span>
                                    </div>
                                  </div>
                                </div>
                                <div class="col col-6 apex-col-auto col-end">
                                  <div class="t-Form-fieldContainer t-Form-fieldContainer--stacked t-Form-fieldContainer--stretchInputs apex-item-wrapper apex-item-wrapper--select-list" id="P4_QUARTERS_CONTAINER">
                                    <div class="t-Form-labelContainer">
                                      <label for="P4_QUARTERS" id="P4_QUARTERS_LABEL" class="t-Form-label">Quarters</label> 
                                    </div>
                                    <div class="t-Form-inputContainer">
                                      <div class="t-Form-itemWrapper">
                                        <select id="P4_QUARTERS" name="P4_QUARTERS" class="selectlist apex-item-select" data-native-menu="false" size="1">
                                          
                                        </select>
                                      </div>
                                      <span id="P4_QUARTERS_error_placeholder" class="a-Form-error" data-template-id="428237130876298931341_ET"></span>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="row ">
                                <div class="col col-6 apex-col-auto col-start">
                                  <div class="t-Form-fieldContainer t-Form-fieldContainer--stacked t-Form-fieldContainer--stretchInputs apex-item-wrapper apex-item-wrapper--select-list" id="P4_INDENT_TYPE_CONTAINER">
                                    <div class="t-Form-labelContainer">
                                      <label for="P4_INDENT_TYPE" id="P4_INDENT_TYPE_LABEL" class="t-Form-label">Indent Type</label> 
                                    </div>
                                    <div class="t-Form-inputContainer">
                                      <div class="t-Form-itemWrapper">
                                        <select id="P4_INDENT_TYPE" name="P4_INDENT_TYPE" class="selectlist apex-item-select" data-native-menu="false" size="1"> 
                                        </select>
                                      </div>
                                      <span id="P4_INDENT_TYPE_error_placeholder" class="a-Form-error" data-template-id="428237130876298931341_ET"></span>
                                    </div>
                                  </div>
                                </div>
                                <div class="col col-6 apex-col-auto col-end">
                                  <div class="t-Form-fieldContainer t-Form-fieldContainer--stacked t-Form-fieldContainer--stretchInputs apex-item-wrapper apex-item-wrapper--select-list" id="P4_SCHEME_NAME_CONTAINER">
                                    <div class="t-Form-labelContainer">
                                      <label for="P4_SCHEME_NAME" id="P4_SCHEME_NAME_LABEL" class="t-Form-label">Scheme Name</label> 
                                    </div>
                                    <div class="t-Form-inputContainer">
                                      <div class="t-Form-itemWrapper">
                                        <select id="P4_SCHEME_NAME" name="P4_SCHEME_NAME" class="selectlist apex-item-select" data-native-menu="false" size="1">
                                         
                                        </select>
                                      </div>
                                      <span id="P4_SCHEME_NAME_error_placeholder" class="a-Form-error" data-template-id="428237130876298931341_ET"></span>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="row ">
                                <div class="col col-6 apex-col-auto col-start">
                                  <button class="t-Button t-Button--icon u-color-12  t-Button--iconLeft t-Button--stretch" type="button" id="getIndentDetails"><span class="t-Icon t-Icon--left " aria-hidden="true"></span><span class="t-Button-label">Search</span><span class="t-Icon t-Icon--right " aria-hidden="true"></span></button>
                                </div>
                                <div class="col col-6 apex-col-auto col-end"><button class="t-Button js-ignoreChange u-color-12  t-Button--stretch" type="button" id="B236785386475709797114"><span class="t-Button-label">Clear</span></button></div>
                              </div>
                            </div>
                          </div>
                          <div class="t-Region-buttons t-Region-buttons--bottom">
                            <div class="t-Region-buttons-left"></div>
                            <div class="t-Region-buttons-right"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row ">
                    <div class="col col-12 apex-col-auto col-start col-end">
                      <div id="R383797781847719467040" role="region" aria-label="Search Results" class="t-IRR-region js-apex-region">
                        <div class="t-Region-orderBy"></div>
                        <div id="R383797781847719467040_ir" class="a-IRR-container">
                          <div id="R383797781847719467040_worksheet_region" class="a-IRR" aria-live="polite">
                            <div id="R383797781847719467040_single_row_view" class="a-IRR-singleRowView"></div>
                            <div id="R383797781847719467040_full_view" class="a-IRR-fullView">
                              <div id="R383797781847719467040_toolbar" class="a-IRR-toolbar">
                                <div role="search" aria-label="Search bar of Search Results" id="R383797781847719467040_toolbar_controls" class="a-IRR-controls">
                                  <div class="a-IRR-controlGroup a-IRR-controlGroup--search a-IRR-controlGroup--hidden">
                                    <div class="a-IRR-search"><input type="hidden" id="R383797781847719467040_column_search_current_column"><input type="hidden" id="R383797781847719467040_search_field" value=""></div>
                                  </div>
                                  <div class="a-IRR-controlGroup a-IRR-controlGroup--views"></div>
                                  <div class="a-IRR-controlGroup a-IRR-controlGroup--options">
                                    <input type="hidden" id="R383797781847719467040_row_select" value="50">
                                    <div class="a-IRR-actions"><button id="R383797781847719467040_actions_button" class="a-Button a-IRR-button a-IRR-button--actions" type="button" data-menu="R383797781847719467040_actions_menu" aria-haspopup="menu">Actions<span aria-hidden="true" class="a-Icon icon-menu-drop-down"></span></button></div>
                                  </div>
                                </div>
                              </div>
                              <div id="R383797781847719467040_content" class="a-IRR-content ">
                                <div id="R383797781847719467040_dialog_js" class="a-IRR-dialogBody" style="display:none"></div>
                                <input type="hidden" id="R383797781847719467040_worksheet_id" value="232474652335427143730">
                                <input type="hidden" id="R383797781847719467040_app_user" value="9994793279">
                                <input type="hidden" id="R383797781847719467040_report_id" value="236785449865720802436">
                                <input type="hidden" id="R383797781847719467040_view_mode" value="REPORT">
                                <style id="R383797781847719467040_worksheet_css" type="text/css"></style>
                                <div role="region" aria-label="Chart view of Search Results" id="R383797781847719467040_chart" class="a-IRR-chartView"></div>
                                <div role="region" aria-label="Group by view of Search Results" id="R383797781847719467040_group_by" class="a-IRR-groupByView"></div>
                                <div role="region" aria-label="Pivot view of Search Results" id="R383797781847719467040_pivot" class="a-IRR-pivotView"></div>
                                <div role="region" aria-label="Data view of Search Results" id="R383797781847719467040_data_panel" class="a-IRR-reportView">
                                  

                                   <div class="a-IRR-tableContainer">
                                    <table id="medicineDetailsWrap" class="display"
                                      style="width:100%">
                                      <thead>
                                        <tr>
                                        <th></th>
                                        <th><input type="checkbox" id="selectAllCheckbox" /></th>
                                          <th>sno</th>
                                          <th>medicine_name</th>
                                          <th>packing_size</th>
                                          <th>amount</th>
                                          <th>quantity</th>
                                          <th>total_amount</th>
                                          <th>system</th>
                                          <th>indent_type</th>
                                          <th>scheme_name</th>
                                          <th>name_of_the_institution</th>
                                          <th>quarters</th>
                                          <th>created_date</th>
                                          <th>financial_year</th>
                                          <th>name_of_the_district</th>
                                          <th>institution_type</th>
                                          <th>status</th> 
                                        </tr>
                                      </thead>
                                      <tbody></tbody>
                                    </table>
                                </div>



                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row ">
                    <div class="col col-5  col-start"><span class="apex-grid-nbsp">&nbsp;</span></div>
                    <div class="col col-3  "><button class="t-Button t-Button--hot js-ignoreChange t-Button--large t-Button--warning" type="button" id="B330804325601681029243"><span class="t-Button-label">Back</span></button><button onclick="apex.submit({request:'Forward',validate:true});" class="t-Button t-Button--hot u-color-12  t-Button--large t-Button--success" type="button" id="B17765024117820620"><span class="t-Button-label">Approved</span></button></div>
                  </div>
                </div>
              </div>
            </main>
            <footer class="t-Footer" id="t_Footer" role="contentinfo">
              <div class="t-Footer-body">
                <div class="t-Footer-content"></div>
                <div class="t-Footer-apex">
                  <!-- <div class="t-Footer-version">    </div>
                    <div class="t-Footer-customize"></div>
                     -->
                  <div class="row"> 
                    <div class="col-6">
                      <p class="text-middle"><img class="footer-logo" src="../assets/img/head-dept-logo.png"><br>Content owned by Department of Indian Medicine and Homoeopathy ©</p>
                    </div>
                    <div class="col-6">
                      <p class="text-middle"><img class="footer-logo" src="../assets/img/tnegalogo.png"><br>Designed and Developed by Tamil Nadu e-Governance Agency</p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="t-Footer-top">
                <a href="#top" class="t-Footer-topButton" id="t_Footer_topButton" title="Start of page" aria-label="Start of page"><span class="a-Icon icon-up-chevron" aria-hidden="true"></span></a>
              </div>
            </footer>
          </div>
        </div>
      </div>
      <div class="t-Body-inlineDialogs" id="t_Body_inlineDialogs"></div>

    </form>


    <!-- show grid click modal -->
    <!-- Bootstrap 5.2 Modal -->
<div class="modal fade" id="indentDetailsModal" tabindex="-1" aria-labelledby="indentDetailsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="indentDetailsModalLabel">View Indent Details - DSMO</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="indentDetailsBody">
        <!-- Indent details will be injected here -->
      </div>
    </div>
  </div>
</div>
  

    <!-- show grid click modal -->

     <!-- jQuery -->
  <script src="../assets/js/jquery-3.6.0.min.js"></script>
  <script src="../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- DataTables -->
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="../assets/js/widget.treeView.min.js"></script>
  <script src="../assets/common.js"></script>
  <script src="../assets/js/widget.interactiveReport.min.js"></script>
  <script src="../assets/js/widget.iconList.min.js"></script>
  <script src="../assets/js/widget.stickyTableHeader.min.js"></script>
  <script src="../assets/js/widget.stickyWidget.min.js"></script>
  <script src="../assets/js/item.Colorpicker.min.js"></script>
  <script src="../assets/js/jetCommonBundle.min.js"></script>
  <script src="../assets/js/chartBundle.min.js"></script>

  <script src="../assets/js/toastUtil.js"></script>
  <script type="module" src="../assets/js/dataTableUtil.js"></script>
  <script src="../assets/js/crypto-js.min.js"></script>
  <script src="../assets/js/theme42.min.js"></script>
  <script src="../assets/js/global.js"></script>
  <script src="../assets/js/encrypt_decrypt.js"></script>
  <script src="../assets/js/singleFileUpload.js"></script>
  <script src="../assets/js/globalHeader.js"></script>


  <script>

  const apiUrl = 'https://tngis.tnega.org/medical_indent_api/v1/commonfunction'; // ✅ Declare globally
  const mobile = localStorage.getItem("userMobileNumber"); 
  
  $(document).ready(function () {
  
    // District
  
  function fetchAndPopulateDropdown({ payload, dropdownId, placeholder }) {
    // debugger
    $.ajax({
      url: apiUrl,
      method: 'POST',
      headers: {
        'X-APP-Key': 'edm',
        'X-APP-Name': 'edm'
      },
      data: {
        data: encryptData(payload)
      },
      dataType: 'json',
      success(response) {
        const decrypted = decryptData(response.data);
        console.log(`Decrypted Data for ${payload.function_name}:`, decrypted);
  
        const $dropdown = $(`#${dropdownId}`);
        $dropdown.empty().append(`<option value="">${placeholder}</option>`);
  
        decrypted.forEach(item => {  
          const value = item.district || item.institude || item.system || item.year || item.quarter || item.type || item.scheme;
          if (value) {        
            $dropdown.append(`<option value="${value}">${value}</option>`);
          }
        });
      },
      error(xhr, status, error) {
        console.error(`${payload.function_name} API Error:`, error);
      }
    });
  }

    // District
    fetchAndPopulateDropdown({ 
      payload: {
        action: "function_call",
        function_name: "im_get_district_list_fn",   
        params: { mobnumber: mobile }
      },
      dropdownId: "P4_NAME_OF_THE_DISTRICT",
      placeholder: "--Select District--"
    });

    // Instituion
    // fetchAndPopulateDropdown({
    //   payload: {
    //     action: "function_call",
    //     function_name: "im_get_institution_list_fn",   
    //     params: { mobnumber: mobile }
    //   },
    //   dropdownId: "P4_NAME_OF_THE_INSTITUTION",
    //   placeholder: "--Select Instituion--"
    // });


    $('#P4_NAME_OF_THE_DISTRICT').on('change', function () {
      const selectedDistrict = $(this).val();

      if (!selectedDistrict) {
        $('#P4_NAME_OF_THE_INSTITUTION').empty().append('<option value="">--Select Institution--</option>');
        return;
      }

      // Fetch institutions based on selected district
      fetchAndPopulateDropdown({
        payload: {
          action: "function_call",
          function_name: "im_get_institution_list_fn",
          params: {
            mobnumber: mobile 
            
          }
        },
        dropdownId: "P4_NAME_OF_THE_INSTITUTION",
        placeholder: "--Select Institution--"
      });
    });    



    // system
    fetchAndPopulateDropdown({
      payload: {
        action: "function_call",
        function_name: "im_system_fn",   
        params: { mobnumber: mobile }
      },
      dropdownId: "P4_SYSTEM",
      placeholder: "--Select System--"
    });

    // financial year
    fetchAndPopulateDropdown({
      payload: {
        action: "function_call",
        function_name: "im_year_fn",   
        params: { }
      },
      dropdownId: "P4_FINANCIAL_YEAR",  
      placeholder: "--Select year--"
    });

    // quarter 
    fetchAndPopulateDropdown({
      payload: {
        action: "function_call",
        function_name: "im_quarter_fn",   
        params: { }
      },
      dropdownId: "P4_QUARTERS",     
      placeholder: "--Select quarter--"
    });

    // indent type 
    fetchAndPopulateDropdown({
      payload: {
        action: "function_call",
        function_name: "im_indent_typ_fn",   
        params: { }
      },
      dropdownId: "P4_INDENT_TYPE",     
      placeholder: "--Select indent type--"
    });

    // scheme names 
    fetchAndPopulateDropdown({
      payload: {
        action: "function_call",
        function_name: "im_scheme_names_fn",   
        params: { }
      },
      dropdownId: "P4_SCHEME_NAME",     
      placeholder: "--Select indent type--"
    });     
    
  
  });
  
  
</script>


<!-- search on click -->
<script> 
  $(document).ready(function () {       
    $('#getIndentDetails').on('click', function () {
      
      const selectedDistrict = $('#P4_NAME_OF_THE_DISTRICT').val();
      const selectedInstituion = $('#P4_NAME_OF_THE_INSTITUTION').val(); 
      const selectedYear = $('#P4_FINANCIAL_YEAR').val(); 
      const selectedQuarter = $('#P4_QUARTERS').val();
      const selectedIndent = $('#P4_INDENT_TYPE').val();
      const selectedScheme = $('#P4_SCHEME_NAME').val();
      const selectedSystem = $('#P4_SYSTEM').val();       
      
      

      // if (!mobile || !selectedDistrict || !selectedInstituion || !selectedYear || !selectedQuarter || !selectedIndent || !selectedScheme || !selectedSystem) {
      //   alert('Please select fields'); 
      //   return;
      // }  

      fetchTableData(mobile, selectedDistrict, selectedInstituion, selectedYear, selectedQuarter, selectedIndent, selectedScheme, selectedSystem);

 
    });
  });

  // clear
//       $('#clearBtn').on('click', function () {

//         district, institute, year, indent, scheme, quarter, system

//   $('#P4_NAME_OF_THE_DISTRICT').val('');
//   $('#P4_NAME_OF_THE_INSTITUTION').val('');
//   $('#P4_FINANCIAL_YEAR').val('');
//   $('#P4_INDENT_TYPE').val('');
//   $('#P4_SCHEME_NAME').val('');
//   $('#P4_QUARTERS').val('');
//   $('#P4_SYSTEM').val('');

//   $('#P4_NAME_OF_THE_DISTRICT, #P4_NAME_OF_THE_INSTITUTION, #P4_FINANCIAL_YEAR, #P4_INDENT_TYPE, #P4_SCHEME_NAME, #P4_QUARTERS, #P4_SYSTEM').trigger('change');

//   clearTable('medicineDetailsWrap');
// });
    


  // ✅ Fetch table data

      function fetchTableData(mobile, district, institute, year, quarter, indent, scheme, system) {
    const payload = getPayload(mobile, district, institute, year, quarter, indent, scheme, system);
    loadDataToTable({  
      tableId: 'medicineDetailsWrap',
      apiUrl,
      httpMethod: 'POST', 
      payload: encryptData(payload),
      rowBuilder: (item) => {
        return `
          <tr> 
           <td class="u-tL"><i class="bi bi-pencil-square edit-indent" data-sno="${item.sno}"></i></td> 
           <td class="u-tC"><input type="checkbox" class="rowCheckbox" data-id="${item.sno}" /></td>
            <td class="u-tC">${item.sno || 'N/A'}</td>
            <td class="u-tC">${item.medicine_name || 'N/A'}</td>
            <td class="u-tC">${item.packing_size || 'N/A'}</td>
            <td class="u-tC">${item.amount || 'N/A'}</td>
            <td class="u-tC">${item.quantity || 'N/A'}</td>
            <td class="u-tC">${item.total_amount || 'N/A'}</td>
            <td class="u-tC">${item.system || 'N/A'}</td>
            <td class="u-tC">${item.indent_type || 'N/A'}</td>
            <td class="u-tC">${item.scheme_name || 'N/A'}</td>
            <td class="u-tC">${item.name_of_the_institution || 'N/A'}</td>
            <td class="u-tC">${item.quarters || 'N/A'}</td>
            <td class="u-tC">${item.created_date || 'N/A'}</td>
            <td class="u-tC">${item.financial_year || 'N/A'}</td>
            <td class="u-tC">${item.name_of_the_district || 'N/A'}</td>
            <td class="u-tC">${item.institution_type || 'N/A'}</td>
            <td class="u-tC">${item.status || 'N/A'}</td>   
          </tr>
        `;
      },
      onTableInit: function (dtRef) {
        dataTableRef = dtRef;
      }
    });
  }

  // ✅ Get payload using passed-in values
  function getPayload(mobile, district, institute, year, quarter, indent, scheme, system) {
    return { 
      action: "function_call",
      function_name: "get_indent_medicine_list_fn",
      params: { 
        p_mobile: mobile, 
        p_district: district,
        p_institute: institute || null, 
        p_year: year || null,
        p_quarter: quarter || null,
        p_indent: indent || null,
        p_scheme: scheme || null,     
        p_system: system || null
        
         
      }
    };
  }
</script>

<!-- search on click -->

<!-- row data fetch -->
<script>
// Handle pencil icon click
$(document).on('click', '.edit-indent', function () {
  const sno = $(this).data('sno'); // from <i data-sno="..." />
  if (!sno) {
    alert('Invalid SNO');
    return;
  }

  const payload = {
    action: "function_call",
    function_name: "im_fetch_indent_medicine_by_sno_fn",
    params: { p_sno: sno }
  };

  fetchIndentDetails(payload);
});


</script>
<!-- row data fetch -->

<!-- modal content data -->
<script>

function fetchIndentDetails(payload) {
  $.ajax({
    url: apiUrl,
    method: 'POST',
    headers: {
      'X-APP-Key': 'edm',
      'X-APP-Name': 'edm'
    },
    data: {
      data: encryptData(payload)
    },
    dataType: 'json',
    success(response) {
      const decrypted = decryptData(response.data);
      console.log("Fetched Indent Details:", decrypted);

      // You can customize the display based on your design
      const html = buildIndentDetailsHTML(decrypted[0]); // assuming first object
      $('#indentDetailsBody').html(html);

      // Show modal
      const modal = new bootstrap.Modal(document.getElementById('indentDetailsModal'));
      modal.show();
    },
    error(xhr, status, error) {
      console.error("Fetch Indent Error:", error);
      alert("Failed to load indent details.");
    }
  });
}


</script>
<!-- modal content data -->

<script>
function buildIndentDetailsHTML(data) {
  return `
    <div class="container">
      <div class="row mb-3">
        <div class="col-md-6"><strong>Medicine Name:</strong> ${data.medicine_name || 'N/A'}</div>
        <div class="col-md-6"><strong>Packing Size:</strong> ${data.packing_size || 'N/A'}</div>
      </div>
      <div class="row mb-3">
        <div class="col-md-6"><strong>Amount:</strong> ${data.amount || 'N/A'}</div>
        <div class="col-md-6"><strong>Quantity:</strong> <input type="number" class="form-control" id="quantityInput" value="${data.quantity || ''}" /></div> 
        <input type="hidden" id="snoHidden" value="${data.sno}" />   
      </div>
      <div class="row mb-3">
        <div class="col-md-6"><strong>Total Amount:</strong> ${data.total_amount || 'N/A'}</div>
        <div class="col-md-6"><strong>System:</strong> ${data.system || 'N/A'}</div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6"><strong>Indent Type:</strong> ${data.indent_type || 'N/A'}</div>
        <div class="col-md-6"><strong>Scheme Name:</strong> ${data.scheme_name || 'N/A'}</div>
      </div>
    <div class="row mb-3">
        <div class="col-md-6"><strong>Name Of The Institution:</strong> ${data.name_of_the_institution || 'N/A'}</div>
        <div class="col-md-6"><strong>Quarters:</strong> ${data.quarters || 'N/A'}</div>
      </div>
    <div class="row mb-3">
        <div class="col-md-6"><strong>Created Date:</strong> ${data.created_date || 'N/A'}</div>
        <div class="col-md-6"><strong>Financial Year:</strong> ${data.financial_year || 'N/A'}</div>
      </div>
    <div class="row mb-3">
        <div class="col-md-6"><strong>Name Of The District:</strong> ${data.name_of_the_district || 'N/A'}</div>
        <div class="col-md-6"><strong>Institution Type:</strong> ${data.institution_type || 'N/A'}</div>
      </div>
    <div class="row mb-3">
        <div class="col-md-6"><strong>Status:</strong> ${data.status || 'N/A'}</div>
      </div>

    <div class="t-Region-buttons t-Region-buttons--bottom">
      <div class="t-Region-buttons-left">
        <button class="t-Button js-ignoreChange" type="button"><span class="t-Button-label">Cancel</span>
        </button>
        </div>
        <div class="t-Region-buttons-right">
        <button class="t-Button " type="button"><span class="t-Button-label" id="delete_medicine">Delete</span></button> 
        <button class="t-Button t-Button--hot " type="button" id="apply_changes"><span class="t-Button-label">Apply Changes</span>
        </button>
      </div>
    </div>



      <!-- Add more rows as needed -->
    </div>
  `;
}

</script>


<!-- apply quantity -->
<script> 

  $(document).on('click', '#apply_changes', function () { 

    console.log('Button clicked'); // for testing

    const sno = $('#snoHidden').val();
    const quantity = $('#quantityInput').val(); 
    const user = localStorage.getItem("userMobileNumber");

     console.log('SNO:', sno, 'Quantity:', quantity, 'User:', user); 

    if (!quantity || isNaN(quantity)) {
      alert("Please enter a valid quantity."); 
      return;
    }

    const payload = {
      action: "function_call",
      function_name: "im_update_indent_medicine_quantity_fn",
      params: {
        p_sno: sno,
        p_quantity: parseFloat(quantity), 
        p_user: user
      }
    };

    $.ajax({
      url: apiUrl,
      method: "POST",
      headers: {
        "X-APP-Key": "edm",
        "X-APP-Name": "edm"
      },
      data: {
        data: encryptData(payload)
      },
      success: function (response) {
        const decrypted = decryptData(response.data);
        console.log("Update Success:", decrypted);
        alert("Quantity updated successfully!");
        // Optionally, refresh the indent view or close modal here

        // ✅ Close the modal
      $('#indentDetailsModal').modal('hide'); 

      // ✅ Re-fetch and reload table with previous filters
      const mobile = localStorage.getItem("userMobileNumber");
      const district = $('#P4_NAME_OF_THE_DISTRICT').val();
      const institute = $('#P4_NAME_OF_THE_INSTITUTION').val();
      const year = $('#P4_YEAR').val();
      const quarter = $('#P4_QUARTER').val();
      const indent = $('#P4_NAME_OF_THE_INDENT').val();
      const scheme = $('#P4_NAME_OF_THE_SCHEME').val();
      const system = $('#P4_SYSTEM').val(); // ✅ now correct selector

      // call your fetchTableData with consistent filter IDs
      fetchTableData(
        mobile,
        district,
        institute,
        year,
        quarter,
        indent,
        scheme,
        system
      );


      },
      error: function (xhr, status, error) {
        console.error("API Error:", error);
        alert("Failed to update quantity.");
      }
    });
  });
</script>

<!-- apply quantity -->


<!-- delete quantity --> 
<script>
$(document).on('click', '#delete_medicine', function () {
  const sno = $('#snoHidden').val(); // Replace with correct ID or source of SNO
  const user = localStorage.getItem("userMobileNumber") || "unknown";

  if (!sno) {
    alert("SNO is missing!");
    return;
  }

  if (!confirm("Are you sure you want to delete this medicine entry?")) return;

  const payload = {
    action: "function_call",
    function_name: "im_delete_indent_medicine_by_sno_fn",
    params: {
      p_sno: sno
    }
  };

  $.ajax({
    url: apiUrl, 
    method: 'POST',
    headers: {
      'X-APP-Key': 'edm',
      'X-APP-Name': 'edm'
    },
    data: {
      data: encryptData(payload)
    },
    success: function (response) {
      const result = decryptData(response.data);
      console.log("Delete success:", result);
      alert("Deleted successfully!");

      // ✅ Close modal
      $('#indentDetailsModal').modal('hide');

      // ✅ Reload table
      const mobile = localStorage.getItem("userMobileNumber");
      const district = $('#P4_NAME_OF_THE_DISTRICT').val();
      const institute = $('#P4_NAME_OF_THE_INSTITUTION').val();
      const year = $('#P4_YEAR').val();
      const quarter = $('#P4_QUARTER').val();
      const indent = $('#P4_NAME_OF_THE_INDENT').val();
      const scheme = $('#P4_NAME_OF_THE_SCHEME').val();
      const system = $('#P4_SYSTEM').val();

      fetchTableData(mobile, district, institute, year, quarter, indent, scheme, system);
    },
    error: function (xhr, status, error) {
      console.error("Delete failed:", error);
      alert("Failed to delete medicine.");
    }
  });
});

</script>
<!-- delete quantity -->

  </body>
</html>


