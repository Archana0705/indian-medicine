<html class="page-43 app-IMIM" lang="en" style="--js-sticky-top: 204.7px;">
  <head>
    <meta http-equiv="x-ua-compatible" content="IE=edge">
    <meta charset="utf-8">
    <title>Medicine Details</title>
    
     <link rel="apple-touch-icon" href="../assets/img/app-icon-192.png">
  <link rel="icon" href="../assets/img/app-icon-32.png">

  <link rel="stylesheet" href="../assets/css/Core.min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/Theme-Standard.min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/font-apex.min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/Core_theme.min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/custom.min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/aos.min.css" type="text/css">
  <link rel="stylesheet" href="../assets/css/theme.css" type="text/css">
  <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="../assets/vendor/datatable/css/dataTables.css" rel="stylesheet">
  <link rel="stylesheet" href="../assets/vendor/datatable/dataTables.bootstrap5.min.css">
  <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="-1">
  <meta http-equiv="Cache-Control" content="no-cache">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    .modal-backdrop {
      background-color: #00000040 !important;
    }
  </style>

  </head>
  <body class="t-PageBody t-PageBody--hideLeft t-PageBody--hideActions t-PageTemplate--standard apex-top-nav apex-icons-fontapex apex-theme-vita-standard js-HeaderExpanded t-PageBody--topNav" id="t_PageBody" data-aos-easing="ease" data-aos-duration="400" data-aos-delay="0">
    <a href="#main" id="t_Body_skipToContent">Skip to Main Content</a>
    <form >
      <input type="hidden" name="p_flow_id" value="117" id="pFlowId"><input type="hidden" name="p_flow_step_id" value="43" id="pFlowStepId"><input type="hidden" name="p_instance" value="10830542083674" id="pInstance"><input type="hidden" name="p_page_submission_id" value="74628224211962353921121273123698149125" id="pPageSubmissionId"><input type="hidden" name="p_request" value="" id="pRequest"><input type="hidden" name="p_reload_on_submit" value="S" id="pReloadOnSubmit"><input type="hidden" value="imim/medicine-details5/10830542083674" id="pContext"><input type="hidden" value="74628224211962353921121273123698149125" id="pSalt">
      <header class="t-Header" id="t_Header" role="banner">
        <div class="t-Header-branding">
          <div class="t-Header-controls">
            <button class="t-Button t-Button--icon t-Button--header t-Button--headerTree" aria-label="Main Navigation" title="Main Navigation" id="t_Button_navControl" type="button"><span class="t-Header-controlsIcon" aria-hidden="true"></span></button>
          </div>
          <div class="t-Header-logo">
            <!-- <a href="&#x2F;ords&#x2F;r&#x2F;dimdev&#x2F;imim&#x2F;home?session=10830542083674" class="t-Header-logo-link"><img src="r&#x2F;dimdev&#x2F;117&#x2F;files&#x2F;static&#x2F;v194&#x2F;app-251298-logo.jpeg" alt="" class="apex-logo-img" /><span class="apex-logo-text">DIRECTORATE OF INDIAN MEDICINE  - INDENT MANAGEMENT</span></a> -->
            <div class="gigw">
              <li><a data-aos="fade-up" data-aos-delay="200" class="linkedin btn-decrease aos-init aos-animate"><span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="font size Decrease"><i></i> A -</span></a></li>
              <li><a data-aos="fade-up" data-aos-delay="300" class="linkedin btn-orig aos-init aos-animate"><span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Reset font"><i></i> A <sup></sup></span></a></li>
              <li><a data-aos="fade-up" data-aos-delay="400" class="instagram btn-increase aos-init aos-animate"><span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="font size Increase"><i></i> A +</span></a></li>
              <li><a data-aos="fade-up" data-aos-delay="500" class="aos-init aos-animate"><span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Dark Mode"><i class="t-Icon fa fa-moon-o" id="darkmode"></i></span></a></li>
              <li><a data-aos="fade-up" data-aos-delay="600" class="form-check form-switch aos-init aos-animate"><label class="form-check-label" for="screenReaderSwitch">
                <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Screen Reader">
                <i id="sound" class="t-Icon fa fa-volume-up"></i></span></label><input class="form-check-input" type="checkbox" role="switch" id="screenReaderSwitch" onclick="readText(document.getElementsByTagName('body')[0])"></a>
              </li>
            </div>
          </div>
          <div class="t-Header-navBar">
            <div class="t-Header-navBar--start"></div>
            <div class="t-Header-navBar--center">
              <ul class="t-NavigationBar " id="428237243222882931397">
                <li class="t-NavigationBar-item ">
                  <button class="t-Button t-Button--icon t-Button t-Button--header t-Button--navBar" type="button" id="L428237300758551931558" data-menu="menu_L428237300758551931558" title="" aria-haspopup="menu">
                  <span class="t-Icon fa fa-user" aria-hidden="true"></span><span class="t-Button-label">Siva</span><span class="t-Button-badge"></span><span class="a-Icon icon-down-arrow" aria-hidden="true"></span>
                  </button>
                </li>
              </ul>
            </div>
            <div class="t-Header-navBar--end"></div>
          </div>
        </div>
        <div class="top">
          <img id="leftlogo" data-aos="fade-right" data-aos-duration="800" src="../assets/img/head-tnlogo.png" class="aos-init aos-animate">
          <h1 data-aos="zoom-in" data-aos-duration="800" class="dept-name text-middle aos-init aos-animate">Medicine Indent</h1>
          <h3 data-aos="zoom-in" data-aos-duration="800" class="dept-name2 text-middle aos-init aos-animate">Department of Indian Medicine and Homoeopathy</h3>
          <img id="rightlogo" data-aos="fade-left" data-aos-duration="800" src="../assets/img/head-dept-logo.png" class="aos-init aos-animate">
        </div>
        <div class="t-Header-nav">
          <div class="t-Header-nav-list js-tabLike js-tabLike a-MenuBar a-MenuBar--overflow a-MenuBar--tabs" id="t_MenuNav" role="menubar">
            <ul role="none">
              <li role="none" id="t_MenuNav_0" class="a-MenuBar-item a-Menu--current"><a role="menuitem" class="a-MenuBar-label" aria-current="true" id="t_MenuNav_0i" href="../dsmo/home.html">Home</a></li>
              <li role="none" id="t_MenuNav_1" class="a-MenuBar-item"><a role="menuitem" class="a-MenuBar-label" id="t_MenuNav_1i" href="../dsmo/received-medicine.html" tabindex="-1">Received Medicine Report</a></li>
              <li role="none" id="t_MenuNav_2" class="a-MenuBar-item"><a role="menuitem" class="a-MenuBar-label" id="t_MenuNav_2i" href="../dsmo/medicine-details.html" tabindex="-1">Medicine Details</a></li>
              <li role="none" id="t_MenuNav_3" class="a-MenuBar-item"><a role="menuitem" class="a-MenuBar-label" id="t_MenuNav_3i" href="../dsmo/download.html" tabindex="-1">Download despatched medicine</a></li>
              <li role="none" id="t_MenuNav_4" class="a-MenuBar-item"><a role="menuitem" class="a-MenuBar-label" id="t_MenuNav_4i" href="../dsmo/view-indent.html" tabindex="-1">View Indent Details - DSMO</a></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="t-Body">
        <div class="t-Body-main">
          <div class="t-Body-title" id="t_Body_title"></div>
          <div class="t-Body-content" id="t_Body_content">
            <div id="t_Body_content_offset"></div>
            <main id="main" class="t-Body-mainContent">
              <span id="APEX_SUCCESS_MESSAGE" data-template-id="238562751400702882270_S" class="apex-page-success u-hidden"></span><span id="APEX_ERROR_MESSAGE" data-template-id="238562751400702882270_E" class="apex-page-error u-hidden"></span>
              <div class="t-Body-fullContent"></div>
              <div class="t-Body-contentInner">
                <div class="container">
                  <div class="row ">
                    <div class="col col-6 apex-col-auto col-start">
                      <div class="t-Form-fieldContainer is-required rel-col t-Form-fieldContainer--stretchInputs t-Form-fieldContainer--indicatorAsterisk t-Form-fieldContainer--large apex-item-wrapper apex-item-wrapper--select-list" id="P43_DISTRICT_CONTAINER">
                        <div class="t-Form-labelContainer col col-2">
                          <!-- <label for="P43_DISTRICT" id="P43_DISTRICT_LABEL" class="t-Form-label">District  </label> -->
                          <label for="P43_DISTRICT" class="form-label">District <span
                                            class="text-danger">*</span></label>
                        </div>
                        <div class="t-Form-inputContainer col col-4">
                          <div class="t-Form-itemWrapper">

                            <select id="P43_DISTRICT" name="P43_DISTRICT" class="form-select" required>
                                          <!-- <option value="Chennai HO">Chennai HO</option> -->
                                        </select>

                          </div>
                          <div class="t-Form-itemAssistance">
                            <span id="P43_DISTRICT_error_placeholder" class="a-Form-error" data-template-id="428237131064519931341_ET"></span>
                            <div class="t-Form-itemRequired" aria-hidden="true">Required</div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col col-6 apex-col-auto col-end">
                      <div class="t-Form-fieldContainer is-required rel-col t-Form-fieldContainer--stretchInputs t-Form-fieldContainer--indicatorAsterisk t-Form-fieldContainer--large apex-item-wrapper apex-item-wrapper--select-list" id="P43_FINANCIAL_YEAR_CONTAINER">
                        <div class="t-Form-labelContainer col col-2">
                          <label for="P43_FINANCIAL_YEAR" id="P43_FINANCIAL_YEAR_LABEL" class="t-Form-label">Financial Year  </label>
                        </div>
                        <div class="t-Form-inputContainer col col-4">
                          <div class="t-Form-itemWrapper">
                            <select id="P43_FINANCIAL_YEAR" name="P43_FINANCIAL_YEAR" required="" class="selectlist apex-item-select" data-native-menu="false" size="1">
                              <!-- <option value="" selected="selected">Select</option> -->
                            </select>
                          </div>
                          <div class="t-Form-itemAssistance">
                            <span id="P43_FINANCIAL_YEAR_error_placeholder" class="a-Form-error" data-template-id="428237131064519931341_ET"></span>
                            <div class="t-Form-itemRequired" aria-hidden="true">Required</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row ">
                    <div class="col col-6 apex-col-auto col-start"><button id="getMedicineDetails"  class="t-Button u-color-12" type="button" ><span class="t-Button-label">Search</span></button></div>
                    <div class="col col-6 apex-col-auto col-end">
                      <button class="t-Button js-ignoreChange" type="button" id="clearBtn"><span class="t-Button-label">Clear</span></button>
                    </div>
                  </div>
                  <div class="row ">
                    <div class="col col-12 apex-col-auto col-start col-end">
                      <div id="R310684784301682619619" role="region" aria-label="Medicine Details" class="t-IRR-region js-apex-region">
                        <div class="t-Region-orderBy"></div>
                        <div id="R310684784301682619619_ir" class="a-IRR-container">
                          <div id="R310684784301682619619_worksheet_region" class="a-IRR" aria-live="polite">
                            <div id="R310684784301682619619_single_row_view" class="a-IRR-singleRowView"></div>
                            <div id="R310684784301682619619_full_view" class="a-IRR-fullView">
                              <div id="R310684784301682619619_toolbar" class="a-IRR-toolbar">
                                <div role="search" aria-label="Search bar of Medicine Details" id="R310684784301682619619_toolbar_controls" class="a-IRR-controls">
                                  <div class="a-IRR-controlGroup a-IRR-controlGroup--search a-IRR-controlGroup--hidden">
                                    <div class="a-IRR-search"><input type="hidden" id="R310684784301682619619_column_search_current_column"><input type="hidden" id="R310684784301682619619_search_field" value=""></div>
                                  </div>
                                  <div class="a-IRR-controlGroup a-IRR-controlGroup--views">
                                    <div class="a-IRR-viewsContainer">
                                      <div class="a-IRR-views"><button id="R310684784301682619619_report_view" type="button" class="a-Button a-IRR-button a-IRR-button--views" data-view="report" title="View Report" aria-label="View Report" aria-pressed="false"><span class="a-Icon icon-irr-report" aria-hidden="true"></span></button><button id="R310684784301682619619_pivot_view" type="button" class="a-Button a-IRR-button a-IRR-button--views is-active" data-view="pivot" title="View Pivot" aria-label="View Pivot" aria-pressed="true"><span class="a-Icon icon-irr-pivot" aria-hidden="true"></span></button></div>
                                    </div>
                                  </div>
                                  <div class="a-IRR-controlGroup a-IRR-controlGroup--options">
                                    <input type="hidden" id="R310684784301682619619_row_select" value="50">
                                    <div class="a-IRR-actions"><button id="R310684784301682619619_actions_button" class="a-Button a-IRR-button a-IRR-button--actions" type="button" data-menu="R310684784301682619619_actions_menu" aria-haspopup="menu">Actions<span aria-hidden="true" class="a-Icon icon-menu-drop-down"></span></button></div>
                                  </div>
                                </div>
                              </div>
                              <div id="R310684784301682619619_content" class="a-IRR-content ">
                                <div id="R310684784301682619619_dialog_js" class="a-IRR-dialogBody" style="display:none"></div>
                                <input type="hidden" id="R310684784301682619619_worksheet_id" value="310684784399891619619">
                                <input type="hidden" id="R310684784301682619619_app_user" value="9994793279">
                                <input type="hidden" id="R310684784301682619619_report_id" value="310685228383927863427">
                                <input type="hidden" id="R310684784301682619619_view_mode" value="PIVOT">
                                <div role="region" aria-label="Report settings of Medicine Details" class="a-MediaBlock a-IRR-controlsContainer a-Collapsible is-expanded" id="R310684784301682619619_control_panel">
                                  <div class="a-MediaBlock-graphic">
                                    <h3 aria-hidden="true" class="u-vh a-Collapsible-heading" id="a_Collapsible1_R310684784301682619619_control_panel_heading">Report Settings</h3>
                                    <span role="heading" aria-level="3"><button type="button" class="a-Button a-IRR-button a-IRR-button--controls" aria-labelledby="a_Collapsible1_R310684784301682619619_control_panel_heading" aria-controls="a_Collapsible1_R310684784301682619619_control_panel_content" aria-expanded="true"><span class="a-Icon a-Collapsible-icon icon-down-arrow" aria-hidden="true"></span></button></span>
                                  </div>
                                  <div class="a-MediaBlock-content a-Collapsible-content" id="a_Collapsible1_R310684784301682619619_control_panel_content" aria-hidden="false">
                                    <ul role="none" class="a-IRR-controls">
                                      <li class="a-IRR-controls-item a-IRR-controls-item--pivot" aria-labelledby="R310684784301682619619_control_text_pivot" role="region"><span class="a-IRR-controls-cell"></span><span class="a-IRR-controls-cell"><span class="a-Icon a-IRR-controlsIcon icon-irr-pivot" aria-hidden="true"></span></span><span class="a-IRR-controls-cell a-IRR-controls-cell--label"><button type="button" aria-describedby="R310684784301682619619_control_text_pivot" class="a-IRR-button--edit a-IRR-controlsLabel" data-setting="pivot"><span aria-hidden="true" id="R310684784301682619619_control_text_pivot">Pivot</span><span class="u-vh">Edit Pivot</span></button></span><span class="a-IRR-controls-cell a-IRR-controls-cell--remove"><button class="a-Button a-IRR-button a-Button--noUI a-IRR-button--remove" aria-label="Remove Pivot" aria-describedby="R310684784301682619619_control_text_pivot" type="button" data-setting="pivot"><span aria-hidden="true" class="a-Icon icon-remove"></span><span class="u-vh" "="">Remove Pivot</span></button></span></li>
                                    </ul>
                                  </div>
                                  <div class="a-IRR-reportSummaryContainer" id="R310684784301682619619_control_panel_summary" style="display: none;">
                                    <ul class="a-IRR-reportSummary">
                                      <li class="a-IRR-reportSummary-item a-IRR-reportSummary-item--pivot"><a href="#" class="a-IRR-reportSummary-label" data-setting="pivot"><span class="a-IRR-reportSummary-icon" aria-label="Pivot" role="img"><span class="a-Icon icon-irr-pivot"></span></span><span class="a-IRR-reportSummary-value">Edit Pivot</span></a></li>
                                    </ul>
                                  </div>
                                </div>
                                <div role="region" aria-label="Chart view of Medicine Details" id="R310684784301682619619_chart" class="a-IRR-chartView"></div>
                                <div role="region" aria-label="Group by view of Medicine Details" id="R310684784301682619619_group_by" class="a-IRR-groupByView"></div>
                                <div role="region" aria-label="Pivot view of Medicine Details" id="R310684784301682619619_pivot" class="a-IRR-pivotView">

                                  <div class="a-IRR-tableContainer">
  <table id="medicineDetailsWrap" class="display"
    style="width:100%">
    <thead>
      <tr>
        <th>SI No</th>
        <th>Edm Id</th>
        <th>Date</th>
        <th>Activity</th>
        <th>Notes</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

                                  <!-- <div role="region" aria-label="Message" class="a-IRR-noDataMsg">
                                    <div class="a-IRR-noDataMsg-icon"><span class="a-Icon icon-irr-no-results" aria-hidden="true"></span></div>
                                    <span class="a-IRR-noDataMsg-text">No data found.</span>
                                  </div> -->


                                </div>
                                <div role="region" aria-label="Data view of Medicine Details" id="R310684784301682619619_data_panel" class="a-IRR-reportView"></div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </main>
            <footer class="t-Footer" id="t_Footer" role="contentinfo">
              <div class="t-Footer-body">
                <div class="t-Footer-content"></div>
                <div class="t-Footer-apex">
                  <!-- <div class="t-Footer-version">    </div>
                    <div class="t-Footer-customize"></div>
                     -->
                  <div class="row">
                    <div class="col-6">
                      <p class="text-middle"><img class="footer-logo" src="../assets/img/head-dept-logo.png"><br>Content owned by Department of Indian Medicine and Homoeopathy ©</p>
                    </div>
                    <div class="col-6">
                      <p class="text-middle"><img class="footer-logo" src="../assets/img/tnegalogo.png"><br>Designed and Developed by Tamil Nadu e-Governance Agency</p>       
                    </div>
                  </div>
                </div>
              </div>
              <div class="t-Footer-top">
                <a href="#top" class="t-Footer-topButton" id="t_Footer_topButton" title="Start of page" aria-label="Start of page"><span class="a-Icon icon-up-chevron" aria-hidden="true"></span></a>
              </div>
            </footer>
          </div>
        </div>
      </div>
      <div class="t-Body-inlineDialogs" id="t_Body_inlineDialogs"></div>
     

    <!-- jQuery -->
  <script src="../assets/js/jquery-3.6.0.min.js"></script>
  <script src="../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- DataTables -->
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="../assets/js/widget.treeView.min.js"></script>
  <script src="../assets/common.js"></script>
  <script src="../assets/js/widget.interactiveReport.min.js"></script>
  <script src="../assets/js/widget.iconList.min.js"></script>
  <script src="../assets/js/widget.stickyTableHeader.min.js"></script>
  <script src="../assets/js/widget.stickyWidget.min.js"></script>
  <script src="../assets/js/item.Colorpicker.min.js"></script>
  <script src="../assets/js/jetCommonBundle.min.js"></script>
  <script src="../assets/js/chartBundle.min.js"></script>

  <script src="../assets/js/toastUtil.js"></script>
  <script type="module" src="../assets/js/dataTableUtil.js"></script>
  <script src="../assets/js/crypto-js.min.js"></script>
  <script src="../assets/js/theme42.min.js"></script>
  <script src="../assets/js/global.js"></script>
  <script src="../assets/js/encrypt_decrypt.js"></script>
  <script src="../assets/js/singleFileUpload.js"></script>
  <script src="../assets/js/globalHeader.js"></script>


<script>
  const apiUrl = 'https://tngis.tnega.org/medical_indent_api/v1/commonfunction'; // ✅ Declare globally
  const mobile = localStorage.getItem("userMobileNumber"); 
  
  $(document).ready(function () {

    // District

  function fetchAndPopulateDropdown({ payload, dropdownId, placeholder }) {
    $.ajax({
      url: apiUrl,
      method: 'POST',
      headers: {
        'X-APP-Key': 'edm',
        'X-APP-Name': 'edm'
      },
      data: {
        data: encryptData(payload)
      },
      dataType: 'json',
      success(response) {
        const decrypted = decryptData(response.data);
        console.log(`Decrypted Data for ${payload.function_name}:`, decrypted);

        const $dropdown = $(`#${dropdownId}`);
        $dropdown.empty().append(`<option value="">${placeholder}</option>`);

        decrypted.forEach(item => {
          const value = item.district || item.im_institution_name_fn || item.disease || item.gender || item.p_institude;
          if (value) {
            $dropdown.append(`<option value="${value}">${value}</option>`);
          }
        });
      },
      error(xhr, status, error) {
        console.error(`${payload.function_name} API Error:`, error);
      }
    });
  }
    fetchAndPopulateDropdown({
      payload: {
        action: "function_call",
        function_name: "im_get_district_list_fn",   
        params: { mobnumber: mobile }
      },
      dropdownId: "P43_DISTRICT",
      placeholder: "--Select District--"
    });
    // District


    function fetchAndPopulateFinancialDropdown({ payload, dropdownId, placeholder }) {
        $.ajax({
          url: apiUrl,
          method: 'POST',
          headers: {
            'X-APP-Key': 'edm',
            'X-APP-Name': 'edm'
          },
          data: {
            data: encryptData(payload)
          },
          dataType: 'json',
          success(response) {
            const decrypted = decryptData(response.data);
            console.log(`Decrypted Data for ${payload.function_name}:`, decrypted);

            const $dropdown = $(`#${dropdownId}`);
            $dropdown.empty().append(`<option value="">${placeholder}</option>`);

            decrypted.forEach(item => {
              const value = item.p_institude || item.p_size || item.im_medicine_price_fn || item.gender || item.year;
              $dropdown.append(`<option value="${value}">${value}</option>`);
            });
          },
          error(xhr, status, error) {
            console.error(`${payload.function_name} API Error:`, error);
          }
        });
      }


    // Financial Year
    fetchAndPopulateFinancialDropdown({     
        payload: {
          action: "function_call",
          function_name: "im_year_fn",
          params: {}
        },
        dropdownId: "P43_FINANCIAL_YEAR",
        placeholder: "--Select Financial Year--"
      });

      // Financial Year


  });


</script>


<!-- search on click -->
<script>
  $(document).ready(function () {
    $('#getMedicineDetails').on('click', function () {
      const selectedDistrict = $('#P43_DISTRICT').val();
      const selectedYear = $('#P43_FINANCIAL_YEAR').val();

      if (!selectedDistrict || !selectedYear) {
        alert('Please select both District and Financial Year');
        return;
      }

      // 👇 Pass values to the function
      fetchTableData(selectedDistrict, selectedYear);
    });
  });

  // clear
      $('#clearBtn').on('click', function () {
      // Reset filters
      $('#P43_DISTRICT').val('');
      $('#P43_FINANCIAL_YEAR').val('');

      // Optionally trigger change if other scripts depend on it
      $('#P43_DISTRICT, #P43_FINANCIAL_YEAR').trigger('change');

      // Clear the table
      clearTable('medicineDetailsWrap');
    });


  // ✅ Fetch table data
  function fetchTableData(district, year) {
    const payload = getPayload(district, year);
    loadDataToTable({
      tableId: 'medicineDetailsWrap',
      apiUrl,
      httpMethod: 'POST',
      payload: encryptData(payload),
      rowBuilder: (item) => {
        return `
          <tr>
            <td class="u-tC">${item.medicine_name || 'N/A'}</td>
            <td class="u-tC">${item.packing_size || 'N/A'}</td>
            <td class="u-tC">${item.name_of_the_institution || 'N/A'}</td>
            <td class="u-tC">${item.quantity || 'N/A'}</td>
           <td class="u-tC">${item.total_quantity || 'N/A'}</td>
                  </tr>
        `;
      },
      onTableInit: function (dtRef) {
        dataTableRef = dtRef;
      }
    });
  }

  // ✅ Get payload using passed-in values
  function getPayload(district, year) {
    return {
      action: "function_call",
      function_name: "im_total_quantity_medicine",
      params: {
        p_district: district,
        p_financial_year: year
      }
    };
  }
</script>

<!-- search on click -->

<script>
function clearTable(tableId) {
  const $tableBody = $(`#${tableId} tbody`);
  if ($tableBody.length) {
    $tableBody.empty().append(`<tr><td colspan="5" class="u-tC">No data available</td></tr>`);
  }
}
</script>


  </body>
</html>